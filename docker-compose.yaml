##################################################################
# This file is automatically generated when running "manala up". #
##################################################################

version: '3.6'

volumes:
    db-data:
    redis-data:

services:
    database:
        image: 'postgres:12-alpine'
        ports: [5432]
        environment:
            POSTGRES_USER: 'app'
            POSTGRES_PASSWORD: 'app'
            POSTGRES_DB: 'app'
            TZ: Etc/UTC
            PGTZ: Etc/UTC
        volumes:
            - db-data:/var/lib/postgresql/data
        healthcheck:
            test: pg_isready
            interval: 10s
            timeout: 5s
            retries: 5

    phppgadmin:
        image: bitnami/phppgadmin
        ports: [8080]
        environment:
            DATABASE_HOST: 'database'

    redis:
        image: 'redis:alpine'
        ports: [6379]
        environment:
            TZ: Etc/UTC
        volumes:
            - redis-data:/data

    phpredisadmin:
        image: erikdubbelboer/phpredisadmin
        ports: [80]
        environment:
            REDIS_1_HOST: 'redis'
